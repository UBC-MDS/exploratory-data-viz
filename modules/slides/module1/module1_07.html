<!DOCTYPE html>
<html lang="en"><head>
<script src="module1_07_files/libs/clipboard/clipboard.min.js"></script>
<script src="module1_07_files/libs/quarto-html/tabby.min.js"></script>
<script src="module1_07_files/libs/quarto-html/popper.min.js"></script>
<script src="module1_07_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="module1_07_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="module1_07_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="module1_07_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <title>module1_07</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="module1_07_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="module1_07_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="module1_07_files/libs/revealjs/dist/theme/quarto-bbe7401fe57d4b791b917637bb662036.css">
  <link href="module1_07_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="module1_07_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="module1_07_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="module1_07_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <style>
  .absolute-center {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    height: 90%;
    margin: auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .reveal .slides section h1 {
    font-size: 2.0em;
    color: #333;
  }
  .reveal .slides section h2,
  .reveal .slides section h3 {
    font-size: 0.9em;
    color: #333;
  }
  .reveal .slides section p, .reveal .slides section li {
    font-size: 0.8em;
    color: #333;
  }
  .reveal .slides section blockquote {
    font-size: 0.4em;
    position: absolute;
    bottom: 0;
    width: 100%;
    padding: 10px 0 10px 15px;
    text-align: left;
  }
  .small-code {
    font-size: 0.4em !important;
  }
  table {
    font-size: 0.7em;
    width: auto;
    margin-right: 5px;
    float: center;
  }
  .reveal .slides section .content-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 40px;
  }
  .reveal .slides section .content-container img {
    width: 100%;
    height: auto;
    max-height: 90vh;
    display: block;
    margin: auto;
  }
  .reveal .slides section .right-aligned-transcript {
    float: right;
    width: 35%;
    font-size: 0.5em;
    text-align: left;
    padding: 0 10px;
    border-left: 4px solid #888;
    margin-left: 5px;
    color: #888 !important;
    align-self: flex-start;
  }
  .reveal .slides section .right-aligned-transcript * {
    border-left: none !important;
    padding: 0;
    margin: 0;
    color: inherit;
  }
  .reveal .slides section .img-transcript {
    width: 45%;
    font-size: 0.7em;
    text-align: left;
    padding: 0 10px;
    border-left: 4px solid #888;
    color: #888 !important;
    max-height: 100%;
    overflow: auto;
  }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="aggregations-lines-and-layers" class="slide level2">
<h2><span class="absolute-center" style="font-size: 3.0em; text-align: center;">Aggregations, lines, and layers</span></h2>
<blockquote>
<strong>Transcript:</strong> In this slide deck, we will see how to aggregate data in Altair (to plot the mean, median, etc), how to create lineplots via <code>mark_line()</code>, and how to combine line and point plots together via layers.
</blockquote>
</section>
<section id="including-all-the-data-can-hinder-visualization-of-general-trends" class="slide level2">
<h2>Including all the data can hinder visualization of general trends</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href=""></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb1-2"><a href=""></a><span class="im">from</span> vega_datasets <span class="im">import</span> data</span>
<span id="cb1-3"><a href=""></a></span>
<span id="cb1-4"><a href=""></a>cars <span class="op">=</span> data.cars()</span>
<span id="cb1-5"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb1-6"><a href=""></a>    x<span class="op">=</span><span class="st">'Weight_in_lbs'</span>,</span>
<span id="cb1-7"><a href=""></a>    y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>,</span>
<span id="cb1-8"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-1.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> Throughout this course we will explore many different datasets, but for now, we will stick to the <code>cars</code> dataset to keep it simple and focus on introducing additional Altair functionality.<br> Let’s refresh our memory with this plot from the previous module.<br> We noted that it appears that cars differ in their weight and mileage based on their country of origin. At least the American cars appear to stand out, but it is difficult to see any differences between Europe and Japan.<br> Visualizing all data points as in this slide is helpful to detect patterns in the data.<br> But when showing all observations, it can be hard to pick up on general trends in the data, e.g.&nbsp;if there are any differences in the mean weight of cars made in either Japan or Europe.<br> To more effectively visualize such general trends in the data, we can create plots of statistical summaries, such as means and medians.<br> In Altair (and pandas) these are referred to as data aggregations. </span></p>
</div>
</div>
</section>
<section id="data-aggregations-are-built-into-altair" class="slide level2">
<h2>Data aggregations are built into Altair</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb2-2"><a href=""></a>    x<span class="op">=</span><span class="st">'mean(Weight_in_lbs)'</span>,</span>
<span id="cb2-3"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>,</span>
<span id="cb2-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-2.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> To plot the means of weight and mileage, we could use pandas to first calculate the mean values, and then plot the resulting dataframe in Altair.<br> This is powerful since we can access all aggregations built into pandas, but it is a bit verbose for simple common operations, such as the mean.<br> Fortunately, Altair has shortcuts for plotting simple aggregations where you provide the name of the aggregation together with the name of the column inside a string as in the example in this slide.<br> <a href="https://altair-viz.github.io/user_guide/encoding.html#binning-and-aggregation" target="_blank">The Altair documentation includes a table with all available aggregations</a> (scroll down a little on the linked page).<br> In this visualization, we can detect small differences between the means of the Japanese and Europeans cars, which was not discernible when we plotted all the points.<br> Whether this difference is big enough to reach a different conclusion than when inspecting the previous plots depends on our application and the purpose of the data exploration. </span></p>
</div>
</div>
</section>
<section id="plotting-aggregations-to-visualize-trends-over-time" class="slide level2">
<h2>Plotting aggregations to visualize trends over time</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href=""></a>cars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource out small-code number-lines code-with-copy"><code class="sourceCode"><span id="cb4-1"><a href=""></a>                          Name  Miles_per_Gallon  Cylinders  Displacement  Horsepower  Weight_in_lbs  Acceleration       Year  Origin</span>
<span id="cb4-2"><a href=""></a>0    chevrolet chevelle malibu              18.0          8         307.0       130.0           3504          12.0 1970-01-01     USA</span>
<span id="cb4-3"><a href=""></a>1            buick skylark 320              15.0          8         350.0       165.0           3693          11.5 1970-01-01     USA</span>
<span id="cb4-4"><a href=""></a>2           plymouth satellite              18.0          8         318.0       150.0           3436          11.0 1970-01-01     USA</span>
<span id="cb4-5"><a href=""></a>3                amc rebel sst              16.0          8         304.0       150.0           3433          12.0 1970-01-01     USA</span>
<span id="cb4-6"><a href=""></a>4                  ford torino              17.0          8         302.0       140.0           3449          10.5 1970-01-01     USA</span>
<span id="cb4-7"><a href=""></a>..                         ...               ...        ...           ...         ...            ...           ...        ...     ...</span>
<span id="cb4-8"><a href=""></a>401            ford mustang gl              27.0          4         140.0        86.0           2790          15.6 1982-01-01     USA</span>
<span id="cb4-9"><a href=""></a>402                  vw pickup              44.0          4          97.0        52.0           2130          24.6 1982-01-01  Europe</span>
<span id="cb4-10"><a href=""></a>403              dodge rampage              32.0          4         135.0        84.0           2295          11.6 1982-01-01     USA</span>
<span id="cb4-11"><a href=""></a>404                ford ranger              28.0          4         120.0        79.0           2625          18.6 1982-01-01     USA</span>
<span id="cb4-12"><a href=""></a>405                 chevy s-10              31.0          4         119.0        82.0           2720          19.4 1982-01-01     USA</span>
<span id="cb4-13"><a href=""></a></span>
<span id="cb4-14"><a href=""></a>[406 rows x 9 columns]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote>
<strong>Transcript:</strong> Aggregations are often helpful when comparing trends over time, especially when there are multiple groups in the data. In the cars dataset, there is a <code>Year</code> column, indicating when the car was made. <br> Often when there is a notion of time in the data, it is interesting to see how values in the dataframe change over time. <br> In this case, we might be interested in knowing whether newer cars are more fuel-efficient than older ones.<br> Presumably, they should be, but does it differ depending on where the car was made?<br> Let’s find out!
</blockquote>
</section>
<section id="plotting-aggregations-to-visualize-trends-over-time-works-well" class="slide level2">
<h2>Plotting aggregations to visualize trends over time works well</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb5-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb5-3"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-4.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> To visualize the mean mileage for each year of all cars, we want to perform the aggregation on the <code>Miles_per_Gallon</code> column while leaving the <code>Year</code> column intact.<br> As you can see this plot one value (the mean) for each year in the dataframe.<br> Here we can see that the observations in this dataframe span the years 1970-1982 and it does indeed look like the mileage is getting better over time as we expected!<br> </span></p>
</div>
</div>
</section>
<section id="plotting-all-data-to-visualize-trends-over-time-is-not-effective" class="slide level2">
<h2>Plotting all data to visualize trends over time is not effective</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb6-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb6-3"><a href=""></a>    y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-5.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> As a comparison with the previous slide, if we instead of the mean would plot all the data points for each year, it would be much more difficult to see the pattern over time as you can see here. </span></p>
</div>
</div>
</section>
<section id="plotting-points-to-visualize-trends-over-time-is-not-ideal" class="slide level2">
<h2>Plotting points to visualize trends over time is not ideal</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb7-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb7-3"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>,</span>
<span id="cb7-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-6.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> If we try to explore the mileage over time while grouping the cars according to their origin, it is a bit difficult to immediately recognize which points belong to which group.<br> In fact, using points for visualizing trends is not ideal, and lines are often preferred as we will see in the next slide. </span></p>
</div>
</div>
</section>
<section id="plotting-lines-to-visualize-trends-over-time-is-ideal" class="slide level2">
<h2>Plotting lines to visualize trends over time is ideal</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href=""></a>alt.Chart(cars).mark_line().encode(</span>
<span id="cb8-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb8-3"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>,</span>
<span id="cb8-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-7.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> One key advantage of line plots is that they connect all the observations that belong to the same group presenting them as one unified graphical object (one line), which is easy for us to distinguish when looking at the plot instead of trying to connect the dots mentally.<br> Another advantage is that the slope of the line makes it easier to see if the value from one year to another is increasing or decreasing.<br> Altair grammar lets us switch from a point plot to a line plot, by only changing <code>mark_point()</code> to <code>mark_line()</code>, and keeping the rest of the code as-is.<br> In this plot, we can clearly compare the mileage trends over time to conclude that cars from all origins improved their mileage, and that the trajectory and mileage values are the most similar between Europe and Japan. </span></p>
</div>
</div>
</section>
<section id="combining-a-line-with-a-set-of-points-via-layers" class="slide level2">
<h2>Combining a line with a set of points via layers</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href=""></a>line <span class="op">=</span> alt.Chart(cars).mark_line().encode(</span>
<span id="cb9-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb9-3"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>)</span>
<span id="cb9-4"><a href=""></a></span>
<span id="cb9-5"><a href=""></a>point <span class="op">=</span> alt.Chart(cars).mark_point().encode(</span>
<span id="cb9-6"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb9-7"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>)</span>
<span id="cb9-8"><a href=""></a></span>
<span id="cb9-9"><a href=""></a>line <span class="op">+</span> point</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-8.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> To augment a line plot, it is sometimes helpful to add <code>point</code> marks for each data point along the line, to emphasize where the observations fall.<br> This is helpful since the line drawn between points could be misleading if we have very few points.<br> For example, if you see a straight line, does that mean there are just two points, one in each corner of the line?<br> Or are there ten points spread out all along the line?<br> To combine two different types of graphical marks (line and point in this case), we will use Altair’s <em>layering</em> grammar.<br> In this slide, we start by defining each chart separately:<br> first a line plot, <br> then a point plot.<br> We can then use the <code>+</code> (plus) operator to combine the two into a layered chart. </span></p>
</div>
</div>
</section>
<section id="building-upon-previous-plots-can-save-time-when-combining-charts" class="slide level2">
<h2>Building upon previous plots can save time when combining charts</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href=""></a>line <span class="op">=</span> alt.Chart(cars).mark_line().encode(</span>
<span id="cb10-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb10-3"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>)</span>
<span id="cb10-4"><a href=""></a></span>
<span id="cb10-5"><a href=""></a>line <span class="op">+</span> line.mark_point()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-9.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> We can also create a layered plot by reusing a previous chart definition.<br> Rather than creating the point plot from scratch, we can start with the line plot, and then invoke the <code>mark_point</code> method.<br> We could also have typed <code>mark_line(point=True)</code>, which is a special case for getting points on a line since it is such a common operation, but the layering grammar extends to other plots, so it is more helpful to focus on learning that. </span></p>
</div>
</div>
</section>
<section id="showing-raw-values-together-with-the-mean-is-often-helpful" class="slide level2">
<h2>Showing raw values together with the mean is often helpful</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href=""></a>line <span class="op">=</span> alt.Chart(cars).mark_line().encode(</span>
<span id="cb11-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb11-3"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>)</span>
<span id="cb11-4"><a href=""></a></span>
<span id="cb11-5"><a href=""></a>line <span class="op">+</span> line.mark_point().encode(y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-10.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> When we are combing plots in layers, we can not only change the mark, but also the encodings.<br> This way, we can create a layer with one point per observations, and with a line for the average values.<br> For this, we need to use <code>encode</code> again after creating the first plot, to instruct Altair to use the raw values instead of the mean for the points.<br> (note that the axis now has two labels, we will see how to change that in a future lecture).<br> This type of visualization is helpful when we want to show both the underlying data and a statistical summary, which is often helpful for elucidating what the data tells us.<br> It is also a good check to make sure nothing unexpected is going on with the raw values as we saw in the introductory example with Anscombe’s quartet. </span></p>
</div>
</div>
</section>
<section id="all-encodings-of-the-base-chart-are-propagated-unless-they-are-overwritten" class="slide level2">
<h2>All encodings of the base chart are propagated unless they are overwritten</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href=""></a>line <span class="op">=</span> alt.Chart(cars).mark_line().encode(</span>
<span id="cb12-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb12-3"><a href=""></a>    y<span class="op">=</span><span class="st">'mean(Miles_per_Gallon)'</span>,</span>
<span id="cb12-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>)</span>
<span id="cb12-5"><a href=""></a></span>
<span id="cb12-6"><a href=""></a>line <span class="op">+</span> line.mark_point().encode(y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/07/unnamed-chunk-11.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> We have already seen that the x and y encoding remain the same in any subsequently created plots.<br> Here, we’re showing that this also applies to the colour encoding to illustrate that any encoding will be propagated to all layers unless they are specifically overwritten.<br> If we would only have added colour to the point chart, there would still have been a single line instead of three. </span></p>
</div>
</div>
</section>
<section id="lets-apply-what-we-learned" class="slide level2">
<h2><span class="absolute-center" style="font-size: 3.0em; text-align: center;">Let’s apply what we learned!</span></h2>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="module1_07_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="module1_07_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="module1_07_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="module1_07_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="module1_07_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="module1_07_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="module1_07_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="module1_07_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="module1_07_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="module1_07_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>