<!DOCTYPE html>
<html lang="en"><head>
<script src="module1_03_files/libs/clipboard/clipboard.min.js"></script>
<script src="module1_03_files/libs/quarto-html/tabby.min.js"></script>
<script src="module1_03_files/libs/quarto-html/popper.min.js"></script>
<script src="module1_03_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="module1_03_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="module1_03_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="module1_03_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <title>module1_03</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="module1_03_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="module1_03_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="module1_03_files/libs/revealjs/dist/theme/quarto-bbe7401fe57d4b791b917637bb662036.css">
  <link href="module1_03_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="module1_03_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="module1_03_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="module1_03_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <style>
  .absolute-center {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    height: 90%;
    margin: auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .reveal .slides section h1 {
    font-size: 2.0em;
    color: #333;
  }
  .reveal .slides section h2,
  .reveal .slides section h3 {
    font-size: 0.9em;
    color: #333;
  }
  .reveal .slides section p, .reveal .slides section li {
    font-size: 0.8em;
    color: #333;
  }
  .reveal .slides section blockquote {
    font-size: 0.4em;
    position: absolute;
    bottom: 0;
    width: 100%;
    padding: 10px 0 10px 15px;
    text-align: left;
  }
  .small-code {
    font-size: 0.4em !important;
  }
  table {
    font-size: 0.7em;
    width: auto;
    margin-right: 5px;
    float: center;
  }
  .reveal .slides section .content-container {
    display: flex;
    align-items: center;  /* Center vertically */
    justify-content: space-between;
    margin-top: 40px;
  }
  .reveal .slides section .content-container img {
    width: 100%;
    height: auto;
    max-height: 90vh;
    display: block;
    margin: auto;
  }
  .reveal .slides section .right-aligned-transcript {
    float: right;
    width: 35%;
    font-size: 0.5em;
    text-align: left;
    padding: 0 10px;
    border-left: 4px solid #888;
    margin-left: 5px;
    color: #888 !important;
    align-self: flex-start;
  }
  .reveal .slides section .right-aligned-transcript * {
    border-left: none !important;
    padding: 0;
    margin: 0;
    color: inherit;
  }
  .reveal .slides section .img-transcript {
    width: 45%;
    font-size: 0.7em;
    text-align: left;
    padding: 0 10px;
    border-left: 4px solid #888;
    color: #888 !important;
    max-height: 100%;
    overflow: auto;
  }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="how-can-we-visualize-data" class="slide level2">
<h2><span class="absolute-center" style="font-size: 3.0em; text-align: center;">How Can We Visualize Data?</span></h2>
<blockquote>
<strong>Transcript:</strong> There are many different data visualization strategies so which one should we choose when visualizing our data?
</blockquote>
</section>
<section id="there-are-two-types-of-visualization-approaches" class="slide level2">
<h2>There are two types of visualization approaches</h2>
<p>When learning about data visualization, it is helpful to distinguish between the following two approaches to visualization:</p>
<ol type="1">
<li>Imperative</li>
<li>Declarative</li>
</ol>
<blockquote>
<strong>Transcript:</strong> There are a plethora of visualization packages in Python.<br> This rich selection can be beneficial but it is also confusing, especially when starting out and trying to decide which package to choose.<br> When learning about data visualization, it is helpful to distinguish between plotting packages that follow either an <em>imperative</em> or a <em>declarative</em> visualization philosophy.
</blockquote>
</section>
<section id="imperative-low-level-plotting-focuses-on-plot-mechanics" class="slide level2">
<h2>Imperative (low level) plotting focuses on plot mechanics</h2>
<ul>
<li>Focus on plot construction details.
<ul>
<li>Often includes loops, low-level drawing commands, etc.</li>
</ul></li>
<li>Specify <em>how</em> something should be done
<ul>
<li>“Draw a red point for every observation that has value X in column A, a blue point for every observation that has value Y in column A, etc.”</li>
</ul></li>
<li>Minute control over plotting details, but laborious for complex visualization.</li>
</ul>
<blockquote>
<strong>Transcript:</strong> <strong>Imperative</strong> (or <strong>low level</strong>) plotting packages focus on plot construction details such as <em>how</em> to implement the visualization in terms of for-loops, low-level drawing commands, etc.<br> This approach gives us minute control over what is plotted, but it becomes quite laborious when we need to plot larger dataframes, or create more complex visualizations.
</blockquote>
</section>
<section id="the-data-we-will-be-plotting" class="slide level2">
<h2>The data we will be plotting</h2>
<center>
<table style="width:50%;">
<thead>
<tr class="header">
<th style="text-align: left;">
Country
</th>
<th style="text-align: right;">
Area
</th>
<th style="text-align: right;">
Population
</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>
Russia
</td>
<td style="text-align: right;">
17098246
</td>
<td style="text-align: right;">
144386830
</td>
</tr>
<tr class="even">
<td>
Canada
</td>
<td style="text-align: right;">
9984670
</td>
<td style="text-align: right;">
38008005
</td>
</tr>
<tr class="odd">
<td>
China
</td>
<td style="text-align: right;">
9596961
</td>
<td style="text-align: right;">
1400050000
</td>
</tr>
</tbody>
</table>
</center>
<blockquote>
<strong>Transcript:</strong> In the example in the next slide, we will plot the area and the population for the three largest countries in the world to see how they compare. This is the table we are plotting.
</blockquote>
</section>
<section id="example-of-imperative-plotting" class="slide level2">
<h2>Example of imperative plotting</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href=""></a><span class="co"># Pseudocode</span></span>
<span id="cb1-2"><a href=""></a>colors <span class="op">=</span> [<span class="st">'blue'</span>, <span class="st">'red'</span>, <span class="st">'yellow'</span>]</span>
<span id="cb1-3"><a href=""></a>plot <span class="op">=</span> create_plot()</span>
<span id="cb1-4"><a href=""></a><span class="cf">for</span> row_number, row_data <span class="kw">in</span> <span class="bu">enumerate</span>(dataframe):</span>
<span id="cb1-5"><a href=""></a>    plot.add_point(x<span class="op">=</span>row_data[<span class="st">'Area'</span>], y<span class="op">=</span>row_data[<span class="st">'Population'</span>], color<span class="op">=</span>colors[row_number])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<p><img src="../../../static/module1/pseudocode-plot.svg" alt=""></p>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> Humans are not good at detecting patterns in raw numbers, and we don’t have good intuition about how different distributions of data can contribute to identical statistical summaries.<br> But guess what we excel at? <strong>Detecting visual patterns!</strong><br> It is immediately clear to us how these sets of numbers differ once they are shown as graphical elements instead of textual objects.<br> This is one of the main reasons why <strong>data visualization</strong> is such a powerful tool for data exploration and communication.<br> In our example here, we would come to widely different conclusions about the behaviour of the data for the four different data sets.<br> Sets <strong>A</strong> and <strong>C</strong> are roughly linearly increasing at similar rates, whereas set <strong>B</strong> reaches a plateau and starts to drop, and set <strong>D</strong> has a constant X-value for all numbers except one big outlier. </span></p>
</div>
</div>
</section>
<section id="declarative-high-level-plotting-focuses-on-the-data" class="slide level2">
<h2>Declarative (high level) plotting focuses on the data</h2>
<ul>
<li>Focus on data and relationships.
<ul>
<li>Often includes linking columns to visual channels.</li>
</ul></li>
<li>Specify <em>what</em> should be done
<ul>
<li>“Assign colors based on the values in column A”</li>
</ul></li>
<li>Smart defaults give us what we want without complete control over minor plotting details.</li>
</ul>
<blockquote>
<strong>Transcript:</strong> <strong>Declarative</strong> (or <strong>high level</strong>) plotting packages declare links between dataframe columns and visual channels, such as the x-axis, y-axis, colour, <em>etc</em>.<br> This means that you can provide a high-level specification of <em>what</em> you want the visualization to include, and the plot details are handled automatically.<br> In summary, declarative visualization tools let you think about <strong>data and relationships</strong>, while imperative visualization tools focus on <strong>plot construction details</strong>.
</blockquote>
</section>
<section id="example-of-declarative-plotting" class="slide level2">
<h2>Example of declarative plotting</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href=""></a><span class="co"># Pseudocode</span></span>
<span id="cb2-2"><a href=""></a>point_plot(data<span class="op">=</span>dataframe, x<span class="op">=</span><span class="st">'Area'</span>, y<span class="op">=</span><span class="st">'Population'</span>, color<span class="op">=</span><span class="st">'Country'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<p><img src="../../../static/module1/pseudocode-plot-with-legend.svg" alt="" width="65%" height="70%"></p>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> The visualization on this page is an example of what a plot could look like when run with real code similar to our pseudocode.<br> You will notice that this time the plot also includes a legend without us having to create it explicitly, which is a common convenience in declarative plotting packages. </span></p>
</div>
</div>
</section>
<section id="a-high-level-grammar-of-graphics-helps-us-compose-plots-effectively" class="slide level2">
<h2>A high-level grammar of graphics helps us compose plots effectively</h2>
<ul>
<li>Simple grammatical components combine to create visualizations.</li>
<li>Visualization grammars often consist of three main components:
<ol type="1">
<li>Create a chart linked to a dataframe.</li>
<li>Add graphical elements (such as points, lines, etc).</li>
<li>Encode dataframe columns as visual channels (such as x, etc).</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href=""></a><span class="co"># Pseudocode</span></span>
<span id="cb3-2"><a href=""></a>chart(dataframe).add_points().encode_columns(x<span class="op">=</span><span class="st">'Area'</span>, y<span class="op">=</span><span class="st">'Population'</span>, color<span class="op">=</span><span class="st">'Country'</span>)`.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote>
<strong>Transcript:</strong> The declarative plotting concept can be implemented in different ways.<br> In the previous slide, we had a dedicated function for creating the pointplot, and there would be a separate function for creating a lineplot, barplot, etc.<br> With this approach, it is often not easy to combine plots together, unless there is a specific function for that purpose and the three bullets points on this slide are all executed by this single function.<br> Another way to use declarative plotting is via a visualization grammar. Generally, a grammar governs how individual parts come together to compose more complex constructs. For example, a linguistic grammar decides how words and phrases can be combined into coherent sentences. A data visualization grammar determines how to combine individual parts of the plotting syntax to create complete visualization. In the example on this slide, you can see that the three bullet points are now broken down into one main function to create the chart linked to the data, and then we build upon this by adding the graphical elements (<code>add_points()</code>) and the encoding of the columns to properties of this chart (<code>encode_columns()</code>). By combining these three grammatical components in different ways, we can build a wide range of visualizations, without memorizing a unique function for each plot type. <br> Thanks to this grammatical visualization approach, we also only require minimal changes to our code to change the type of plot.
</blockquote>
</section>
<section id="the-python-plotting-landscape" class="slide level2">
<h2>The Python plotting landscape</h2>
<p><br></p>

<img src="../../../static/module1/py-plotting-landscape.png" alt="The Python plotting landscape" width="100%" class="r-stretch"><blockquote>
<strong>Transcript:</strong> Now that we know the basic concepts of how data can be visualized, let’s select a Python package and get coding!<br> In this image, you can see the most commonly used Python plotting packages. There are many more, but these are the ones you are the most likely to hear about, so it is good to know that they exist.<br> The text to the left in the image is a legend to explain the colours used for the different Python packages (blue for high level, declarative packages and orange for low-level, imperative packages).<br> As you can see there are several high and low-level language, so how do we chose?<br> In this course we will use <a href="https://altair-viz.github.io/" target="_blank">Altair</a>, because it is a powerful declarative visualization tool with a clear and consistent grammar that also allows us to add interactive components to our plots, such as tooltips and selections.<br> We have also included some of the most common visualization packages for the web which are built-in Javascript and coloured in white.<br> The reason we mention these is that the Altair library is a little bit of Python code connected to an already existing powerful JavaScript package called VegaLite, which in turns builds on D3, the most dominant visualization package on the web today.<br> By leveraging these well-established JavaScript visualization packages Altair can create plots that work natively on the web and includes interactive features without reinventing the wheel.<br> Since Altair and VegaLite are relatively new visualization libraries, they don’t yet support every single plot type out there, but they more than make up for it with their ease of use and support for powerful interactive visualizations, as we will see later.
</blockquote>
</section>
<section id="sample-data-can-be-found-in-altairs-companion-package-vega_datasets" class="slide level2">
<h2>Sample data can be found in Altair’s companion package vega_datasets</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href=""></a><span class="im">from</span> vega_datasets <span class="im">import</span> data</span>
<span id="cb4-2"><a href=""></a></span>
<span id="cb4-3"><a href=""></a>cars <span class="op">=</span> data.cars()</span>
<span id="cb4-4"><a href=""></a>cars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource out small-code number-lines code-with-copy"><code class="sourceCode"><span id="cb5-1"><a href=""></a>                          Name  Miles_per_Gallon  Cylinders  Displacement  Horsepower  Weight_in_lbs  Acceleration       Year  Origin</span>
<span id="cb5-2"><a href=""></a>0    chevrolet chevelle malibu              18.0          8         307.0       130.0           3504          12.0 1970-01-01     USA</span>
<span id="cb5-3"><a href=""></a>1            buick skylark 320              15.0          8         350.0       165.0           3693          11.5 1970-01-01     USA</span>
<span id="cb5-4"><a href=""></a>2           plymouth satellite              18.0          8         318.0       150.0           3436          11.0 1970-01-01     USA</span>
<span id="cb5-5"><a href=""></a>3                amc rebel sst              16.0          8         304.0       150.0           3433          12.0 1970-01-01     USA</span>
<span id="cb5-6"><a href=""></a>4                  ford torino              17.0          8         302.0       140.0           3449          10.5 1970-01-01     USA</span>
<span id="cb5-7"><a href=""></a>..                         ...               ...        ...           ...         ...            ...           ...        ...     ...</span>
<span id="cb5-8"><a href=""></a>401            ford mustang gl              27.0          4         140.0        86.0           2790          15.6 1982-01-01     USA</span>
<span id="cb5-9"><a href=""></a>402                  vw pickup              44.0          4          97.0        52.0           2130          24.6 1982-01-01  Europe</span>
<span id="cb5-10"><a href=""></a>403              dodge rampage              32.0          4         135.0        84.0           2295          11.6 1982-01-01     USA</span>
<span id="cb5-11"><a href=""></a>404                ford ranger              28.0          4         120.0        79.0           2625          18.6 1982-01-01     USA</span>
<span id="cb5-12"><a href=""></a>405                 chevy s-10              31.0          4         119.0        82.0           2720          19.4 1982-01-01     USA</span>
<span id="cb5-13"><a href=""></a></span>
<span id="cb5-14"><a href=""></a>[406 rows x 9 columns]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote>
<strong>Transcript:</strong> Before we start visualizing data, we need to select a dataset and often also a question we want to answer. Altair works with dataframes in the <a href="http://vita.had.co.nz/papers/tidy-data.html" target="_blank">“tidy”</a> format (which we talked about in the <a href="https://prog-learn.mds.ubc.ca/" target="_blank">Programming in Python for Data Science course</a>), which means that they should consist of rows with one <strong>observation</strong> each and a set of named data <strong>columns</strong> with one feature each (you might also have heard these called <strong>fields</strong> or <strong>variables</strong>, but we will stick to <strong>columns</strong> for clarity). In this course, we will often use data from the <a href="https://github.com/vega/vega-datasets" target="_blank">vega-datasets</a> package, which has many plot-friendly practice datasets available as Pandas dataframes and can be loaded as demonstrated in this slide. We can use these datasets by importing the <code>data</code> module from the <code>vega_datasets</code> packages as in this slide. Here, our data contains the name of different cars and some attributes relating to each car. There are many interesting questions we could ask from this data set! For our first plot, let’s explore the relationship between how heavy a car is (the <code>Weight_in_lbs</code> column) and how good gas mileage it has (the <code>Miles_per_gallon</code> column). Before starting to code the visualization, take a few seconds and think about what you would expect the relationship between these two columns to look like when you plot it.
</blockquote>
</section>
<section id="adding-graphical-elements-via-marks" class="slide level2">
<h2>Adding graphical elements via marks</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href=""></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb6-2"><a href=""></a></span>
<span id="cb6-3"><a href=""></a>alt.Chart(cars).mark_point()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<iframe src="../../../static/module1/charts/03/unnamed-chunk-4.html" width="100%" height="420px" style="border:none;">
</iframe>
<blockquote>
<strong>Transcript:</strong> Here we assigned a shorter name (<code>alt</code>) to the Altair library when importing it to save us some typing later. The Altair syntax is similar to the grammar of graphics pseudocode we saw a few slides ago. The fundamental object in Altair is the <code>Chart</code>, which takes a data frame as a single argument, e.g.&nbsp;<code>alt.Chart(cars)</code>.<br> After the chart object has been created, we can specify how the graphical element should look that we use to visualize the data. This is called a graphical <em>mark</em> in Altair, and in this slide, we have used <code>mark_point()</code> to show the data as points.<br> Since we have not specified which columns should be used for the x and y axes, we appear to only see one point in this plot since all the data is plotted on top of each other in the same location.<br> To the right of the chart, there is a button with three dots on it. Don’t worry about it for now, we will explain what this is for at the end of the chapter.
</blockquote>
</section>
<section id="encoding-columns-as-visual-channels" class="slide level2">
<h2>Encoding columns as visual channels</h2>
<p><strong><em>Mapping a dataframe column to the x-scale</em></strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb7-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Weight_in_lbs'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<iframe src="../../../static/module1/charts/03/unnamed-chunk-5.html" width="100%" height="420px" style="border:none;">
</iframe>
<blockquote>
<strong>Transcript:</strong> To visually separate the points, we can encode columns in the dataframe as visual channels, such as the axes or colours of the plot.<br> Here, we <em>encode</em> the column <code>Miles_per_Gallon</code> as the x-axis. For Pandas data frames, Altair automatically determines an appropriate data type for the mapped column, which in this case is quantitative (or numerical) and shows the numbers under the axis.<br> You can see that there are several short black lines spread out evenly on the x-axis. These are called axis ticks and help us see where the values of this dataframe column lie along the axis.<br> The faint gray lines are called grid lines and extend the locations of the axis ticks so that it is easy to compare their position to the points.<br> This is particularly useful when the points might be further away from the axis ticks, such as in the next slide.
</blockquote>
</section>
<section id="mapping-a-dataframe-column-to-the-y-scale" class="slide level2">
<h2>Mapping a dataframe column to the y-scale</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb8-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Weight_in_lbs'</span>,</span>
<span id="cb8-3"><a href=""></a>    y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/03/unnamed-chunk-6.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> By spreading out the data along both the x and y-axis, we can answer our initial question about the relationship between car weight and gas mileage. as it appears that the heavier cars are the ones that have the poorest mileage.<br> Although we might have expected this to be the case, visualizing all the data points also provides information on the nature of the relationship between weight and mileage.<br> It appears that the x-y points don’t simply follow a straight line, but rather a curved line that where the mileage drop quickly when moving away from the lightest cars, but then decreases more slowly throughout the remainder of the data. <br> This rich, easily interpretable display of information is one of the main advantages of visualizing data and later in the course, we will talk more about the different type of relationships, such as linear, exponential, etc.<br> </span></p>
</div>
</div>
</section>
<section id="mapping-a-numerical-dataframe-column-to-the-colour-scale" class="slide level2">
<h2>Mapping a numerical dataframe column to the colour scale</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb9-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Weight_in_lbs'</span>,</span>
<span id="cb9-3"><a href=""></a>    y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>,</span>
<span id="cb9-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Horsepower'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/03/unnamed-chunk-7.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> Is there a relationship between horsepower and car weight, or fuel-efficiency?<br> To enrich this display of information further, we can colour the points according to a column in the dataframe. When we encode a column as the colour channel Altair will automatically figure out an appropriate colour scale to use, depending on whether the data is numerical, categorical, etc. Here we have indicated that we want to colour the points according to the car’s horsepower, which indicated how powerful its engine is.<br> We can see that the heavier cars have more powerful engines, than the lighter ones, but when using colour for a numerical comparison like this, makes it is harder to tell whether the relationship follows a straight line or is of another nature, so this encoding is mostly useful as an approximate indication of the horsepower. <br> We can also observe a relationship between the horsepower of a vehicle and the fuel efficiency. It appears that cars with greater horsepower (the points with a darker shade of blue) are less efficient with their fuel since miles per Gallon is much lower. <br> In the next module, we will learn more in detail about which encodings are most suitable for different comparisons. </span></p>
</div>
</div>
</section>
<section id="mapping-a-categorical-dataframe-column-to-the-colour-scale" class="slide level2">
<h2>Mapping a categorical dataframe column to the colour scale</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb10-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Weight_in_lbs'</span>,</span>
<span id="cb10-3"><a href=""></a>    y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>,</span>
<span id="cb10-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/03/unnamed-chunk-8.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> In the previous slide, a continuous, gradually increasing colour scale was used to visualize the gradual increase in the numerical column <code>Horsepower</code>. In this slide, we instead chose to colour the points per the categorical column <code>Origin</code> (where the car was made).<br> As you can see, Altair detects that this column contains categorical data (with the help of pandas) and picks a different colour scale to facilitate distinction between the categories. As in the previous slide, <br> Altair automatically adds a helpful legend, and we can see that the heavier, more powerful cars are primarily manufactured in the US, while the lighter more fuel-efficient ones are manufactured in Europe and Japan (remember that this is true for this particular dataset, and not necessarily all cars).<br> </span></p>
</div>
</div>
</section>
<section id="mapping-a-dataframe-column-to-the-shape-scale" class="slide level2">
<h2>Mapping a dataframe column to the shape scale</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb11-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Weight_in_lbs'</span>,</span>
<span id="cb11-3"><a href=""></a>    y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>,</span>
<span id="cb11-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>,</span>
<span id="cb11-5"><a href=""></a>    shape<span class="op">=</span><span class="st">'Origin'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/03/unnamed-chunk-9.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> Although Altair’s colour scales are designed to be effective and easy to interpret, we can make the categories in our plot even more distinct by encoding the same categorical column as both colour and shape.<br> This also makes visualizations much easier to interpret and understand for anyone with visual colour deficiency (about 10% of the population). We will talk more in-depth about colour theory in a later module.<br> </span></p>
</div>
</div>
</section>
<section id="mapping-a-dataframe-column-to-the-size-scale" class="slide level2">
<h2>Mapping a dataframe column to the size scale</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb12-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Weight_in_lbs'</span>,</span>
<span id="cb12-3"><a href=""></a>    y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>,</span>
<span id="cb12-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>,</span>
<span id="cb12-5"><a href=""></a>    shape<span class="op">=</span><span class="st">'Origin'</span>,</span>
<span id="cb12-6"><a href=""></a>    size<span class="op">=</span><span class="st">'Horsepower'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/03/unnamed-chunk-10.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> Sometimes a visualization tries to do too much. In this example, we have added the size channel to indicate the engine power.<br> Although Altair elegantly handles the dual legends, it is difficult for us to discern useful information from this plot. If you go back to the plot where we encoded weight in the colour channel, you can see that the plot is much clearer.<br> Later we will learn more about how to efficiently load a visualization with an appropriate amount of information, and what the research indicates regarding which visual channels are the most efficient for communicating information visually.<br> </span></p>
</div>
</div>
</section>
<section id="the-action-button-can-be-used-to-save-the-plot" class="slide level2">
<h2>The action button can be used to save the plot</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource python small-code number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href=""></a>alt.Chart(cars).mark_point().encode(</span>
<span id="cb13-2"><a href=""></a>    x<span class="op">=</span><span class="st">'Weight_in_lbs'</span>,</span>
<span id="cb13-3"><a href=""></a>    y<span class="op">=</span><span class="st">'Miles_per_Gallon'</span>,</span>
<span id="cb13-4"><a href=""></a>    color<span class="op">=</span><span class="st">'Origin'</span>,</span>
<span id="cb13-5"><a href=""></a>    shape<span class="op">=</span><span class="st">'Origin'</span>,</span>
<span id="cb13-6"><a href=""></a>    size<span class="op">=</span><span class="st">'Horsepower'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="content-container">
<iframe src="../../../static/module1/charts/03/unnamed-chunk-11.html" width="55%" height="420px" style="border:none;">
</iframe>
<div class="right-aligned-transcript">
<p><span data-notes=""> <strong>Transcript:</strong> This is the same visualization as from the last slide, and we will just use it as an example.<br> The button to the right of the chart with three dots on it is called the “action button”. and clicking it will bring up a menu.<br> The first two items in ’s menu can be used to save the chart, either in an image-based PNG-format or a text-based SVG-format.<br> We will also be learning about programmatic ways to save our charts later in the course.<br> The last three menu items relate to the library VegaLite, which is what we mentioned Altair is built upon, but we will not be using these in this course. </span></p>
</div>
</div>
</section>
<section id="lets-apply-what-we-learned" class="slide level2">
<h2><span class="absolute-center" style="font-size: 3.0em; text-align: center;">Let’s apply what we learned!</span></h2>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="module1_03_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="module1_03_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="module1_03_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="module1_03_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="module1_03_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="module1_03_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="module1_03_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="module1_03_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="module1_03_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="module1_03_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>